<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Node," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="ç›®å½•
æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨
æ–‡ä»¶æ¨¡å—çš„ä½¿ç”¨
IOé”®ç›˜äº¤äº’
URLè§£æ

ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨ä»€ä¹ˆæ˜¯æ¨¡å—æ¨¡å—å’Œæ–‡ä»¶æ˜¯ä¸€ ä¸€å¯¹åº”çš„ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼ŒNode.jsæä¾›äº†exportså’Œrequireä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­exportsæ˜¯æ¨¡å—å…¬å…±çš„æ¥å£ï¼Œrequireç”¨äºä»å¤–éƒ¨è·å–ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå³è·å–æ¨¡å—çš„exportså¯¹è±¡ã€‚æƒ³è¦åœ¨å¤–éƒ¨ç”¨è‡ªå®šä¹‰æ¨¡å—ä¸­çš„æ–¹æ³•exportsæ–¹æ³•æš´éœ²å‡ºå»ï¼Œé€šè¿‡requireå¼•">
<meta property="og:type" content="article">
<meta property="og:title" content="Nodeæ¨¡å—åˆ›å»ºåŠä½¿ç”¨ï¼Œæ–‡ä»¶æ“ä½œï¼ŒIOäº¤äº’ï¼ŒURLè§£æğŸŒ¼">
<meta property="og:url" content="https://menggeniu.github.io/2016/05/24/32/index.html">
<meta property="og:site_name" content="NNNã®åšå®¢">
<meta property="og:description" content="ç›®å½•
æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨
æ–‡ä»¶æ¨¡å—çš„ä½¿ç”¨
IOé”®ç›˜äº¤äº’
URLè§£æ

ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨ä»€ä¹ˆæ˜¯æ¨¡å—æ¨¡å—å’Œæ–‡ä»¶æ˜¯ä¸€ ä¸€å¯¹åº”çš„ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼ŒNode.jsæä¾›äº†exportså’Œrequireä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­exportsæ˜¯æ¨¡å—å…¬å…±çš„æ¥å£ï¼Œrequireç”¨äºä»å¤–éƒ¨è·å–ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå³è·å–æ¨¡å—çš„exportså¯¹è±¡ã€‚æƒ³è¦åœ¨å¤–éƒ¨ç”¨è‡ªå®šä¹‰æ¨¡å—ä¸­çš„æ–¹æ³•exportsæ–¹æ³•æš´éœ²å‡ºå»ï¼Œé€šè¿‡requireå¼•">
<meta property="og:updated_time" content="2016-11-22T09:38:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nodeæ¨¡å—åˆ›å»ºåŠä½¿ç”¨ï¼Œæ–‡ä»¶æ“ä½œï¼ŒIOäº¤äº’ï¼ŒURLè§£æğŸŒ¼">
<meta name="twitter:description" content="ç›®å½•
æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨
æ–‡ä»¶æ¨¡å—çš„ä½¿ç”¨
IOé”®ç›˜äº¤äº’
URLè§£æ

ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨ä»€ä¹ˆæ˜¯æ¨¡å—æ¨¡å—å’Œæ–‡ä»¶æ˜¯ä¸€ ä¸€å¯¹åº”çš„ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼ŒNode.jsæä¾›äº†exportså’Œrequireä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­exportsæ˜¯æ¨¡å—å…¬å…±çš„æ¥å£ï¼Œrequireç”¨äºä»å¤–éƒ¨è·å–ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå³è·å–æ¨¡å—çš„exportså¯¹è±¡ã€‚æƒ³è¦åœ¨å¤–éƒ¨ç”¨è‡ªå®šä¹‰æ¨¡å—ä¸­çš„æ–¹æ³•exportsæ–¹æ³•æš´éœ²å‡ºå»ï¼Œé€šè¿‡requireå¼•">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://menggeniu.github.io/2016/05/24/32/"/>





  <title> Nodeæ¨¡å—åˆ›å»ºåŠä½¿ç”¨ï¼Œæ–‡ä»¶æ“ä½œï¼ŒIOäº¤äº’ï¼ŒURLè§£æğŸŒ¼ | NNNã®åšå®¢ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">NNNã®åšå®¢</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">ä¸–ä¸Šæ‰€æœ‰çš„ç›¸é‡éƒ½æ˜¯ä¹…åˆ«é‡é€¢</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://menggeniu.github.io/2016/05/24/32/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="menggeNIU">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="NNNã®åšå®¢">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="NNNã®åšå®¢" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Nodeæ¨¡å—åˆ›å»ºåŠä½¿ç”¨ï¼Œæ–‡ä»¶æ“ä½œï¼ŒIOäº¤äº’ï¼ŒURLè§£æğŸŒ¼
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-24T20:50:08+08:00">
                2016-05-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/05/24/32/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/24/32/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/05/24/32/" class="leancloud_visitors" data-flag-title="Nodeæ¨¡å—åˆ›å»ºåŠä½¿ç”¨ï¼Œæ–‡ä»¶æ“ä½œï¼ŒIOäº¤äº’ï¼ŒURLè§£æğŸŒ¼">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•° </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ul>
<li>æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨</li>
<li>æ–‡ä»¶æ¨¡å—çš„ä½¿ç”¨</li>
<li>IOé”®ç›˜äº¤äº’</li>
<li>URLè§£æ</li>
</ul>
<h3 id="ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨"><a href="#ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨" class="headerlink" title="ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨"></a>ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨</h3><h4 id="ä»€ä¹ˆæ˜¯æ¨¡å—"><a href="#ä»€ä¹ˆæ˜¯æ¨¡å—" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡å—"></a>ä»€ä¹ˆæ˜¯æ¨¡å—</h4><p>æ¨¡å—å’Œæ–‡ä»¶æ˜¯ä¸€ ä¸€å¯¹åº”çš„ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶ï¼ŒNode.jsæä¾›äº†exportså’Œrequireä¸¤ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­exportsæ˜¯æ¨¡å—å…¬å…±çš„æ¥å£ï¼Œrequireç”¨äºä»å¤–éƒ¨è·å–ä¸€ä¸ªæ¨¡å—çš„æ¥å£ï¼Œå³è·å–æ¨¡å—çš„exportså¯¹è±¡ã€‚æƒ³è¦åœ¨å¤–éƒ¨ç”¨è‡ªå®šä¹‰æ¨¡å—ä¸­çš„æ–¹æ³•exportsæ–¹æ³•æš´éœ²å‡ºå»ï¼Œé€šè¿‡requireå¼•å…¥æ¨¡å—å†è°ƒç”¨å…¶æ–¹æ³•ã€‚<br></p>
<h4 id="æ¨¡å—çš„åˆ†ç±»"><a href="#æ¨¡å—çš„åˆ†ç±»" class="headerlink" title="æ¨¡å—çš„åˆ†ç±»"></a>æ¨¡å—çš„åˆ†ç±»</h4><h5 id="æ ¸å¿ƒæ¨¡å—"><a href="#æ ¸å¿ƒæ¨¡å—" class="headerlink" title="æ ¸å¿ƒæ¨¡å—"></a>æ ¸å¿ƒæ¨¡å—</h5><p>å¦‚httpã€fsã€pathç­‰ï¼Œå¼•ç”¨ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹ä¸­çš„ä¸€æ®µè¯<br><br><code>æ ¸å¿ƒæ¨¡å—éƒ¨åˆ†åœ¨Nodeæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘è¿›äº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨Nodeè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œéƒ¨åˆ†æ ¸å¿ƒæ¨¡å—å°±è¢«ç›´æ¥åŠ è½½è¿›å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†æ ¸å¿ƒæ¨¡å—å¼•å…¥æ—¶ï¼Œæ–‡ä»¶å®šä½å’Œç¼–è¯‘æ‰§è¡Œè¿™ä¸¤ä¸ªæ­¥éª¤å¯ä»¥çœç•¥æ‰ï¼Œå¹¶ä¸”åœ¨è·¯å¾„åˆ†æä¸­ä¼˜å…ˆåˆ¤æ–­ï¼Œæ‰€ä»¥ä»–çš„åŠ è½½é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚</code></p>
<h5 id="ç¬¬ä¸‰æ–¹æ¨¡å—"><a href="#ç¬¬ä¸‰æ–¹æ¨¡å—" class="headerlink" title="ç¬¬ä¸‰æ–¹æ¨¡å—"></a>ç¬¬ä¸‰æ–¹æ¨¡å—</h5><p>é€šè¿‡NPMå®‰è£…çš„æ¨¡å—éƒ½ä¼šæ”¾å…¥åˆ°node_modulesç›®å½•ä¸‹ï¼Œåœ¨å¼•ç”¨æ¨¡å—æ—¶å’Œæ ¸å¿ƒæ¨¡å—ç±»ä¼¼ï¼Œrequireæ–¹æ³•åªéœ€å†™æ¨¡å—åä¸€å°±å¯ä»¥ï¼Œä¸éœ€è¦è·¯å¾„ã€‚Nodeåœ¨æŸ¥æ‰¾è¿™ä¸ªæ¨¡å—æ—¶ä¼šç°åœ¨æœ¬çº§ç›®å½•ä¸‹æŸ¥çœ‹æ˜¯å¦æœ‰node_modulesç›®å½•ï¼Œè‹¥æœ‰çœ‹å…¶å†…æ˜¯å¦æœ‰ç›¸åº”çš„æ¨¡å—ï¼Œè‹¥æ²¡æœ‰ä¼šå»çˆ¶ç›®å½•æŸ¥æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå°±åƒæ˜¯JavaScriptçš„åŸå‹é“¾å’Œä½œç”¨åŸŸé“¾çš„æŸ¥æ‰¾æ–¹å¼ã€‚æ‰€ä»¥è¿™ç±»æ¨¡å—çš„æŸ¥æ‰¾ä¼šè€—æ—¶æœ€å¤šï¼ŒåŠ è½½æœ€æ…¢ã€‚</p>
<h4 id="åˆ›å»ºæ¨¡å—"><a href="#åˆ›å»ºæ¨¡å—" class="headerlink" title="åˆ›å»ºæ¨¡å—"></a>åˆ›å»ºæ¨¡å—</h4><h5 id="ç¬¬ä¸€ç§æ–¹å¼"><a href="#ç¬¬ä¸€ç§æ–¹å¼" class="headerlink" title="ç¬¬ä¸€ç§æ–¹å¼"></a>ç¬¬ä¸€ç§æ–¹å¼</h5><pre><code>//mymodule.js
//ä½¿ç”¨exportså‘å¤–éƒ¨æš´éœ²æ–¹æ³•
var name;
exports.setName=function(isname) {
  name = isname;
}
exports.sayNanme=function (){
  console.log(&apos;hello my name is &apos;+name);
}


//getmymodule.js
var myModule =require(&apos;./mymodule&apos;);
myModule.setName(&apos;AngelaMuller&apos;);//è°ƒç”¨æ¨¡å—ä¸­æ–¹æ³•è®¾ç½®å±æ€§
myModule.sayNanme();//è°ƒç”¨æ–¹æ³•
</code></pre><h6 id="ä½¿ç”¨ï¼š"><a href="#ä½¿ç”¨ï¼š" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h6><pre><code>muller@ubuntu:~/node$ node getmymodule.js
hello my name is AngelaMuller
</code></pre><h5 id="ç¬¬äºŒç§æ–¹å¼"><a href="#ç¬¬äºŒç§æ–¹å¼" class="headerlink" title="ç¬¬äºŒç§æ–¹å¼"></a>ç¬¬äºŒç§æ–¹å¼</h5><pre><code>//mymodule.js
module.exports =  function (name){
  this.name = name;
  this.sayhello = function(){
      console.log(&apos;hello worldï¼&apos;+this.name);
  }
};

//getmymodule.js
var person  = require(&apos;./mymodule&apos;);
var oneper = new person(&apos;AngelaMuller&apos;);
oneper.sayhello();
</code></pre><h6 id="ä½¿ç”¨ï¼š-1"><a href="#ä½¿ç”¨ï¼š-1" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h6><pre><code>muller@ubuntu:~/node$ node getmymodule.js
hello worldï¼AngelaMuller
</code></pre><h4 id="å•æ¬¡åŠ è½½"><a href="#å•æ¬¡åŠ è½½" class="headerlink" title="å•æ¬¡åŠ è½½"></a>å•æ¬¡åŠ è½½</h4><p>ä¸Šé¢çš„ä¾‹å­æœ‰ç‚¹ç±»ä¼¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä½†å®é™…ä¸Šå’Œå¯¹è±¡åˆæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œå› ä¸ºrequireä¸ä¼šé‡å¤åŠ è½½æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡requireï¼Œè·å–çš„æ¨¡å—éƒ½æ˜¯åŒä¸€ä¸ª<br></p>
<h4 id="è¦†ç›–exports"><a href="#è¦†ç›–exports" class="headerlink" title="è¦†ç›–exports"></a>è¦†ç›–exports</h4><p>æœ‰æ—¶æˆ‘ä»¬çŸ¥è¯†æƒ³æŠŠä¸€ä¸ªå¯¹è±¡å°è£…åˆ°æ¨¡å—ä¸­ï¼Œä¾‹å¦‚<br><br>å®šä¹‰æ¨¡å—ï¼šsingleobejct.js<br><br>å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject.js<br><br>ç¹çï¼šexports.hello=hello;<br><br>å¼•å…¥ï¼šrequire(â€œ./singleobjectâ€).hello;<br><br>ç®€æ˜“ï¼šmodule.exports=hello;<br><br>exportsæœ¬èº«ä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šçš„ç©ºå¯¹è±¡ï¼Œå³{}ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥å£°æ˜æ¥å£<br></p>
<hr>
<h5 id="å®šä¹‰æ¨¡å—ï¼šsingleobejct-js"><a href="#å®šä¹‰æ¨¡å—ï¼šsingleobejct-js" class="headerlink" title="å®šä¹‰æ¨¡å—ï¼šsingleobejct.js"></a>å®šä¹‰æ¨¡å—ï¼šsingleobejct.js</h5><pre><code>function hello(){
var name;
this.setName=function(thyName){
    name=thyName;
}
this.sayHello=function(){
    console.log(&apos;hello &apos;+name);
}
}
//exports.hello=hello;
module.exports=hello;    // å®šä¹‰çš„æ–¹æ³•æ·»åŠ    ï¼ˆç®€å•çš„æ–¹å¼ï¼‰
</code></pre><h5 id="å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject-js"><a href="#å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject-js" class="headerlink" title="å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject.js"></a>å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject.js</h5><pre><code>var hello=require(&apos;./singleobject&apos;);
var he=new hello();
he.setName(&apos;marico&apos;);  //å®ä¾‹åŒ–ç¬¬ä¸€ä¸ªå®ä¾‹
he.sayHello();
var he2=new hello();  //å®ä¾‹åŒ–ç¬¬äºŒä¸ªå®ä¾‹
he2.setName(&apos;yfc&apos;);
he2.sayHello()
</code></pre><h5 id="ç»“æœè¾“å‡ºï¼š"><a href="#ç»“æœè¾“å‡ºï¼š" class="headerlink" title="ç»“æœè¾“å‡ºï¼š"></a>ç»“æœè¾“å‡ºï¼š</h5><pre><code>[root@localhost nodejs]# node getSingleObject.js 
hello marico
hello yfc
</code></pre><p>ç¹çï¼šexports.hello=hello; //ä½¿ç”¨è¿™ç§æ–¹å¼åŠ è½½åœ¨å¯¹è±¡ä¸­æ—¶ï¼Œåœ¨è°ƒç”¨ä½¿ç”¨æ—¶æ¯”è¾ƒç¹ç<br>å¼•å…¥ï¼šrequire(â€œ./singleobjectâ€).hello;<br></p>
<h3 id="äºŒã€æ–‡ä»¶æ“ä½œ"><a href="#äºŒã€æ–‡ä»¶æ“ä½œ" class="headerlink" title="äºŒã€æ–‡ä»¶æ“ä½œ"></a>äºŒã€æ–‡ä»¶æ“ä½œ</h3><p>node.jsæ¨¡å—æ˜¯æ–‡ä»¶æ“ä½œçš„å°è£…ï¼Œå®ƒæä¾›äº†æ–‡ä»¶çš„è¯»å–ï¼Œå†™å…¥ï¼Œæ›´åï¼Œåˆ é™¤ï¼Œéå†ç›®å½•ï¼Œé“¾æ¥POSIXæ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚ä¸å…¶ä»–æ¨¡å—ä¸åŒçš„æ˜¯ï¼Œfsæ¨¡å—ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½æä¾›äº†å¼‚æ­¥å’ŒåŒæ­¥ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œè¯»å–æ–‡ä»¶å†…å®¹å‡½æ•°å¼‚æ­¥æ–¹æ³•ï¼ŒreadFile(),åŒæ­¥æ–¹æ³•readFileSync().<br><br>1.åŒæ­¥æ–¹å¼çš„æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨ä¼šå¯¼è‡´é˜»å¡ï¼Œç”±äºNode.jsæ˜¯å•çº¿ç¨‹çš„ï¼Œç›´åˆ°æ–‡ä»¶è°ƒç”¨å®Œæˆåï¼Œæ§åˆ¶æƒæ‰ä¼šè¢«æ”¾å›ä¸»çº¿ç¨‹ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´äº†åå°å…¶ä»–çº¿ç¨‹æ± ä¸­çš„å¾ˆå¤šçº¿ç¨‹ä¸èƒ½å¤Ÿæ‰§è¡Œï¼Œä»è€Œå¯¼è‡´Node.jsä¸­ä¸€å®šç¨‹åº¦çš„æ€§èƒ½é—®é¢˜ã€‚å› æ­¤åº”è¯¥å°½å¯èƒ½çš„å‡å°‘ä½¿ç”¨åŒæ­¥æ–¹å¼çš„æ–‡ä»¶ç³»ç»Ÿçš„æ–¹æ³•è°ƒç”¨ã€‚<br><br>2.å¼‚æ­¥è°ƒç”¨ä¼šè¢«ä¸»çº¿ç¨‹æ”¾ç½®åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­ä»¥å¤‡éšåè¿è¡Œï¼Œè¿™ä½¿å¾—è°ƒç”¨èƒ½å¤Ÿèå…¥Node.jsä¸­çš„äº‹ä»¶æ¨¡å‹ã€‚ä½†åœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œå°±ä¼šå˜å¾—æœ‰ç‚¹æ£˜æ‰‹ï¼Œå› ä¸ºäº‹ä»¶å¹¶ä¸èƒ½åœ¨é¢„æœŸçš„æ—¶å€™å®Œæˆï¼Œè¿™å°±éœ€è¦æœ‰ä¸€ä¸ªcallbackå‡½æ•°æ¥è§„å®šå½“è°ƒç”¨å®Œæˆæ—¶éœ€è¦å®Œæˆçš„äº‹ã€‚ï¼ˆè¿™é‡Œå¯ä»¥å»æ·±å…¥äº†è§£ä¸‹Node.jsçš„äº‹ä»¶é˜Ÿåˆ—ï¼‰<br></p>
<ul>
<li>ç®€å•è¯»å–<ul>
<li>fs.readFile(path,[options],callback);</li>
<li>fs.readFildSync(path,[options]);</li>
</ul>
</li>
<li>éç®€å•è¯»å–<ul>
<li>fs.read(fd,buffer,offset,length,position,callback);</li>
<li>fs.readSync(fd,buffer,offset,length,position);<ul>
<li>æµå¼è¯»å–<ul>
<li>fs.createReadStream(path,[options]);</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>fsæ¨¡å—çš„å…¶ä»–æ–¹æ³•<ul>
<li>éªŒè¯æ–‡ä»¶/ç›®å½•è·¯å¾„çš„å­˜åœ¨æ€§</li>
<li>fs.exists(path,callback);</li>
<li>fs.existsSync(path);</li>
</ul>
</li>
</ul>
<p><strong>æ³¨</strong>ï¼š åŒæ­¥æ–¹æ³•è¿”å›true/falseï¼Œå¼‚æ­¥æ–¹æ³•callbackä»…ä»…åªæœ‰ä¸€ä¸ªerrå¯¹è±¡è¡¨ç¤ºæ˜¯å¦åˆ é™¤æˆåŠŸã€‚<br></p>
<pre><code>åŒæ­¥è¯»å–
//å¼•å…¥fsæ¨¡å—
var fs=require(&apos;fs&apos;);
fs.readFile(&apos;content.txt&apos;,&apos;UTF-8&apos;,function(err,data){
    if(err){
        console.log(err);
    }else{
        console.log(data);
    }
});

//æ²¡æœ‰å›è°ƒå‡½æ•°
try{
    var data=fs.readFileSync(&apos;content.txt&apos;,&apos;UTF-8&apos;);
    console.log(data+&quot;åŒæ­¥å¼è¯»å–&quot;);
}catch(e){
    console.log(e)
}
</code></pre><p>content.txt å†…å®¹<br><br>Node.jsçš„æ–‡ä»¶ç³»ç»Ÿçš„Api   AngelaMuller<br><br>è¾“å‡ºç»“æœï¼š<br></p>
<pre><code>muller@ubuntu:~/node$ node mymodule.js 
Node.jsçš„æ–‡ä»¶ç³»ç»Ÿçš„Api   AngelaMulleråŒæ­¥å¼è¯»å–
Node.jsçš„æ–‡ä»¶ç³»ç»Ÿçš„Api   AngelaMuller
</code></pre><p>å¼‚æ­¥è¯»å–æ–‡ä»¶ä¸readFileç›¸åŒï¼Œè€Œè¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹ä¼šä»¥å‡½æ•°è¿”å›å€¼çš„å½¢å¼è¿”å›ï¼Œå¦‚æœæœ‰é”™è¯¯å‘ç”Ÿï¼Œfså°†æŠ›å‡ºå¼‚å¸¸ï¼Œä½ éœ€è¦tryå’Œcatchæ•è·å¹¶å¤„ç†å¼‚å¸¸ã€‚<br><br><a href="http://stackoverflow.com/questions/22863170/node-js-from-fs-readfilesync-to-fs-readfile" target="_blank" rel="external">Node.js from fs.readFileSync() to fs.readFile()</a><br><br>å…¶ä»–æ–¹æ³•è¯·æŸ¥çœ‹å®˜æ–¹API<a href="https://nodejs.org/dist/latest-v4.x/docs/api/fs.html" target="_blank" rel="external">https://nodejs.org/dist/latest-v4.x/docs/api/fs.html</a><br></p>
<h3 id="ä¸‰ã€-IOäº¤äº’"><a href="#ä¸‰ã€-IOäº¤äº’" class="headerlink" title="ä¸‰ã€ IOäº¤äº’"></a>ä¸‰ã€ IOäº¤äº’</h3><h4 id="ä»€ä¹ˆæ˜¯IOäº¤äº’"><a href="#ä»€ä¹ˆæ˜¯IOäº¤äº’" class="headerlink" title="ä»€ä¹ˆæ˜¯IOäº¤äº’"></a>ä»€ä¹ˆæ˜¯IOäº¤äº’</h4><p>ç®€å•ç‚¹æ˜¯Node.jsçš„æ§åˆ¶å°è¾“å…¥è¾“å‡ºï¼ŒI æ˜¯input å¯è¯»è¾“å…¥æµ ï¼ŒOæ˜¯output å¯è¾“å‡ºæµï¼ŒNode.jsä¹Ÿæœ‰å¦‚åŒC++å’ŒJavaçš„æ ‡å‡†è¾“å…¥è¾“å‡ºè¿›è¡Œäº¤äº’ã€‚<br></p>
<ul>
<li>è¾“å…¥è®¾å¤‡<ul>
<li>è¾“å…¥è®¾å¤‡æ˜¯äººå‘è®¡ç®—æœºè¾“å…¥ä¿¡æ¯çš„è®¾å¤‡ï¼Œå¸¸ç”¨çš„è¾“å…¥è®¾å¤‡æœ‰ï¼š<ol>
<li>é”®ç›˜â€”äººå‘è®¡ç®—æœºè¾“å…¥ä¿¡æ¯æœ€åŸºæœ¬çš„è®¾å¤‡ï¼› </li>
<li>é¼ æ ‡å™¨â€”-ä¸€ç§å…‰æ ‡æŒ‡ç‚¹è®¾å¤‡ï¼›</li>
<li>è§¦æ‘¸å±â€”-ä¸€ç§åæ ‡å®šä½è®¾å¤‡ï¼Œå¸¸ç”¨äºå…¬å…±æŸ¥è¯¢ç³»ç»Ÿã€‚</li>
</ol>
</li>
</ul>
</li>
<li>è¾“å‡ºè®¾å¤‡<ul>
<li>è¾“å‡ºè®¾å¤‡æ˜¯ç›´æ¥å‘äººæä¾›è®¡ç®—æœºè¿è¡Œç»“æœçš„è®¾å¤‡ï¼Œå¸¸ç”¨çš„è¾“å‡ºè®¾å¤‡æœ‰ï¼š<ol>
<li>æ˜¾ç¤ºå™¨â€”è®¡ç®—æœºçš„ä¸»è¦è¾“å‡ºè®¾å¤‡,å®ƒä¸é”®ç›˜ä¸€èµ·æ„æˆæœ€åŸºæœ¬çš„äººæœºå¯¹è¯ç¯å¢ƒï¼›</li>
<li>æ‰“å°æœºâ€”æ‰“å°æœºä¸ºç”¨æˆ·æä¾›è®¡ç®—æœºä¿¡æ¯çš„ç¡¬æ‹·è´ã€‚å¸¸ç”¨çš„æ‰“å°æœºæœ‰ï¼šå‡»æ‰“å¼ã€å–·å¢¨å¼å’Œæ¿€å…‰æ‰“å°æœºã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="ä»€ä¹ˆæ˜¯Readline"><a href="#ä»€ä¹ˆæ˜¯Readline" class="headerlink" title="ä»€ä¹ˆæ˜¯Readline"></a>ä»€ä¹ˆæ˜¯Readline</h4><p>Readlineæ˜¯Node.jsé‡Œå®ç°æ ‡å‡†è¾“å…¥è¾“å‡ºçš„å°è£…å¥½çš„æ¨¡å—ï¼Œé€šè¿‡è¿™ä¸ªæ¨¡å—æˆ‘ä»¬å¯ä»¥ä»¥é€è¡Œçš„æ–¹å¼è¯»å–æ•°æ®æµã€‚<br><br>ä½¿ç”¨require(â€œreadlineâ€)å¯ä»¥å¼•ç”¨æ¨¡å—ã€‚<br></p>
<h4 id="å¦‚ä½•ä½¿ç”¨Readline"><a href="#å¦‚ä½•ä½¿ç”¨Readline" class="headerlink" title="å¦‚ä½•ä½¿ç”¨Readline"></a>å¦‚ä½•ä½¿ç”¨Readline</h4><pre><code>// å¼•å…¥readlineæ¨¡å—
const readline = require(&apos;readline&apos;);

//åˆ›å»ºreadlineæ¥å£å®ä¾‹
const rl = readline.createInterface({
    input: process.stdin,  //ç›‘å¬çš„å¯è¯»æµ (å¿…å¡«)
    output: process.stdout //é€è¡Œè¯»å–ï¼ˆReadlineï¼‰æ•°æ®è¦å†™å…¥çš„å¯å†™æµ(å¯é€‰)
});
rl.setPrompt(&apos;What is your name ? &gt; &apos;);//è®¾ç½®æç¤ºç¬¦
rl.prompt(); //ä¸ºç”¨æˆ·è¾“å…¥å‡†å¤‡å¥½é€è¡Œè¯»å–ï¼ˆReadlineï¼‰,è®©ç”¨æˆ·æœ‰æ–°çš„åœ°æ–¹è¾“å…¥


rl.on(&apos;line&apos;, function (str) {
    console.log(&apos;my name is : &apos;+str);
});

// closeäº‹ä»¶ç›‘å¬
rl.on(&quot;close&quot;, function(){
   // ç»“æŸç¨‹åº
   console.log(&apos;Have a great day!&apos;);
    process.exit(0);// ç»“æŸç¨‹åº
});

/* v0.10.44 ç‰ˆæœ¬ä¼¼ä¹æœ‰é—®é¢˜ v4.5.0æ¡ˆä¾‹
rl.on(&apos;line&apos;, (line) =&gt; {
    var str = line.trim();
    console.log(&apos;my name is : &apos;+str);

    rl.prompt();
}).on(&apos;close&apos;, () =&gt; {
  console.log(&apos;Have a great day!&apos;);
  process.exit(0);
});
*/
</code></pre><p>åœ¨closeäº‹ä»¶çš„ç›‘å¬é‡Œï¼Œæˆ‘ä»¬æ‰§è¡Œäº†process.exit(0)æ¥ä½¿ç¨‹åºé€€å‡ºçš„æ“ä½œï¼Œå› ä¸ºreadlineæ¨¡å—åªè¦ä¸€å¼€å§‹è·å–ç”¨æˆ·è¾“å…¥å°±ä¸ä¼šç»“æŸï¼Œå¿…é¡»ä½¿ç”¨è¿™ç§ç›´æ¥çš„æ–¹å¼æ¥ç»“æŸç¨‹åºã€‚<br></p>
<h4 id="è¾“å…¥ä¸è¾“å‡ºå®ä¾‹"><a href="#è¾“å…¥ä¸è¾“å‡ºå®ä¾‹" class="headerlink" title="è¾“å…¥ä¸è¾“å‡ºå®ä¾‹"></a>è¾“å…¥ä¸è¾“å‡ºå®ä¾‹</h4><pre><code>// å¼•å…¥readlineæ¨¡å—
var readline = require(&apos;readline&apos;);

var rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

rl.on(&apos;line&apos;, function(line){
    switch(line.trim()) {
        case &apos;copy&apos;:
            console.log(&quot;å¤åˆ¶&quot;);
            break;
        case &apos;hello&apos;:
            rl.write(&quot;Write&quot;);
            console.log(&apos;world!&apos;);
            break;
        case &apos;close&apos;:
            rl.close();
            break;
        default:
            console.log(&apos;æ²¡æœ‰æ‰¾åˆ°å‘½ä»¤ï¼&apos;);
            break;
    }
});
rl.on(&apos;close&apos;, function() {
    console.log(&apos;bye bye&apos;);
    process.exit(0);
});

 &apos;line&apos;äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶å°±æ˜¯åœ¨ç”¨æˆ·è¾“å®Œä¸€è¡Œï¼ŒæŒ‰ä¸‹å›è½¦åå°±ä¼šè§¦å‘çš„äº‹ä»¶ï¼Œå®ƒä¼šå°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®é€šè¿‡å›è°ƒå‡½æ•°ä¼ å›æ¥ï¼Œå¯åœ¨æ­¤æ–¹æ³•é‡Œå¤„ç†ç”¨æˆ·è¾“å…¥çš„æ•°æ®
</code></pre><h4 id="å‘½ä»¤è¡Œè¾“å…¥ä¸è¾“å‡º"><a href="#å‘½ä»¤è¡Œè¾“å…¥ä¸è¾“å‡º" class="headerlink" title="å‘½ä»¤è¡Œè¾“å…¥ä¸è¾“å‡º"></a>å‘½ä»¤è¡Œè¾“å…¥ä¸è¾“å‡º</h4><pre><code>const readline = require(&apos;readline&apos;);
const rl = readline.createInterface(process.stdin, process.stdout);

rl.setPrompt(&apos;OHAI&gt; &apos;);
rl.prompt();

rl.on(&apos;line&apos;, (line) =&gt; {
  switch(line.trim()) {
    case &apos;hello&apos;:
      console.log(&apos;world!&apos;);
      break;
    default:
      console.log(&apos;Say what? I might have heard `&apos; + line.trim() + &apos;`&apos;);
      break;
  }
  rl.prompt();
}).on(&apos;close&apos;, () =&gt; {
  console.log(&apos;Have a great day!&apos;);
  process.exit(0);
});
</code></pre><h3 id="å››ã€URLè§£æ"><a href="#å››ã€URLè§£æ" class="headerlink" title="å››ã€URLè§£æ"></a>å››ã€URLè§£æ</h3><h4 id="1-URLæ¨¡å—ä¸ºURLçš„è§£æå·¥å…·"><a href="#1-URLæ¨¡å—ä¸ºURLçš„è§£æå·¥å…·" class="headerlink" title="1.URLæ¨¡å—ä¸ºURLçš„è§£æå·¥å…·"></a>1.URLæ¨¡å—ä¸ºURLçš„è§£æå·¥å…·</h4><pre><code>var url = require(&apos;url&apos;);
var urlString = &apos;http://user:pass@best.bluepay.asia:90/p/a/t/h?query=string#hash&apos;;
var result = url.parse(urlString);
console.log(result);

//ç¬¬äºŒä¸ªå¯é€‰å‚æ•°è®¾ç½®ä¸ºtrueæ—¶  query: { query: &apos;string&apos; },
</code></pre><p>è¾“å‡ºç»“æœï¼š<br></p>
<pre><code>muller@ubuntu:~/node$ node url.js
Url {
  protocol: &apos;http:&apos;,
  slashes: true,
  auth: &apos;user:pass&apos;,
  host: &apos;best.bluepay.asia:90&apos;,
  port: &apos;90&apos;,
  hostname: &apos;best.bluepay.asia&apos;,
  hash: &apos;#hash&apos;,
  search: &apos;?query=string&apos;,
  query: &apos;query=string&apos;,
  pathname: &apos;/p/a/t/h&apos;,
  path: &apos;/p/a/t/h?query=string&apos;,
  href: &apos;http://user:pass@best.bluepay.asia:90/p/a/t/h?query=string#hash&apos; }
</code></pre><ul>
<li>href å±æ€§ä¼šè¢«å¿½ç•¥ </li>
<li>protocolæ— è®ºæ˜¯å¦æœ‰æœ«å°¾çš„ : (å†’å·)ï¼Œä¼šåŒæ ·çš„å¤„ç† è¿™äº›åè®®åŒ…æ‹¬ http, https, ftp, gopher, file åç¼€æ˜¯ :// (å†’å·-æ–œæ -æ–œæ ). æ‰€æœ‰å…¶ä»–çš„åè®®å¦‚ mailto, xmpp, aim, sftp, foo, ç­‰ ä¼šåŠ ä¸Šåç¼€ : (å†’å·) </li>
<li>auth å¦‚æœæœ‰å°†ä¼šå‡ºç°. </li>
<li>hostname å¦‚æœ host å±æ€§æ²¡è¢«å®šä¹‰ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å±æ€§. </li>
<li>port å¦‚æœ host å±æ€§æ²¡è¢«å®šä¹‰ï¼Œåˆ™ä¼šä½¿ç”¨æ­¤å±æ€§. </li>
<li>host ä¼˜å…ˆä½¿ç”¨ï¼Œå°†ä¼šæ›¿ä»£ hostname å’Œport </li>
<li>pathname å°†ä¼šåŒæ ·å¤„ç†æ— è®ºç»“å°¾æ˜¯å¦æœ‰/ (æ–œæ ) </li>
<li>search å°†ä¼šæ›¿ä»£ queryå±æ€§ </li>
<li>query (objectç±»å‹; è¯¦ç»†è¯·çœ‹ querystring) å¦‚æœæ²¡æœ‰ search,å°†ä¼šä½¿ç”¨æ­¤å±æ€§. </li>
<li>search æ— è®ºå‰é¢æ˜¯å¦æœ‰ ? (é—®å·)ï¼Œéƒ½ä¼šåŒæ ·çš„å¤„ç† </li>
<li>hashæ— è®ºå‰é¢æ˜¯å¦æœ‰# (äº•å·, é”šç‚¹)ï¼Œéƒ½ä¼šåŒæ ·å¤„ç†</li>
</ul>
<hr>
<h4 id="2-queryString-æ¨¡å—"><a href="#2-queryString-æ¨¡å—" class="headerlink" title="2.queryString æ¨¡å—"></a>2.queryString æ¨¡å—</h4><p>æä¾›äº†å®ç”¨ç¨‹åºæ¥å¤„ç†æŸ¥è¯¢å­—ç¬¦ä¸²<br></p>
<ul>
<li>querystring.stringify(obj, [sep], [eq])<ul>
<li>å°†JSONå¯¹è±¡æ ¼å¼åŒ–ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤çš„åˆ†éš”ç¬¦ä¸ºï¼šâ€œ&amp;â€å’Œâ€œ=â€ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸€ä¸‹ä»¥ä¸‹ä»£ç .<br></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">querystring.stringify(&#123; foo: &apos;bar&apos;, baz: [&apos;qux&apos;, &apos;quux&apos;], corge: &apos;&apos; &#125;)</div><div class="line">// returns &apos;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge=&apos;</div><div class="line"></div><div class="line">querystring.stringify(&#123;foo: &apos;bar&apos;, baz: &apos;qux&apos;&#125;, &apos;;&apos;, &apos;:&apos;)</div><div class="line">// returns &apos;foo:bar;baz:qux&apos;</div><div class="line"></div><div class="line">// Suppose gbkEncodeURIComponent function already exists,</div><div class="line">// it can encode string with `gbk` encoding</div><div class="line">querystring.stringify(&#123; w: &apos;ä¸­æ–‡&apos;, foo: &apos;bar&apos; &#125;, null, null,</div><div class="line">  &#123; encodeURIComponent: gbkEncodeURIComponent &#125;)</div><div class="line">// returns &apos;w=%D6%D0%CE%C4&amp;foo=bar&apos;</div></pre></td></tr></table></figure>
<ul>
<li>querystring.parse(str, [sep], [eq], [options])<ul>
<li>æ ¹æ®â€œ&amp;â€å’Œâ€œ=â€å°†å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ï¼Œååºåˆ—åŒ–ä¸ºJSONå¯¹è±¡ï¼Œè€ŒoptionsåŒ…å«çš„maxKeysé»˜è®¤è®¾ç½®ä¸º1000ï¼Œå¦‚æœå°†å…¶è®¾ç½®ä¸º0åˆ™è¡¨ç¤ºæ²¡è¿™ä¸ªé™åˆ¶.</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">querystring.parse(&apos;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge&apos;)</div><div class="line">// returns &#123; foo: &apos;bar&apos;, baz: [&apos;qux&apos;, &apos;quux&apos;], corge: &apos;&apos; &#125;</div><div class="line"></div><div class="line">// Suppose gbkDecodeURIComponent function already exists,</div><div class="line">// it can decode `gbk` encoding string</div><div class="line">querystring.parse(&apos;w=%D6%D0%CE%C4&amp;foo=bar&apos;, null, null,</div><div class="line">  &#123; decodeURIComponent: gbkDecodeURIComponent &#125;)</div><div class="line">// returns &#123; w: &apos;ä¸­æ–‡&apos;, foo: &apos;bar&apos; &#125;</div></pre></td></tr></table></figure>
<ul>
<li>querystring.escapeï¼Œquerystring.unescape<ul>
<li>è¿™ä¸¤ä¸ªå†…ç½®æ–¹æ³•ï¼Œåˆ†åˆ«åœ¨ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•çš„å†…ç½®ä½¿ç”¨ï¼Œå¦‚æœæœ‰éœ€è¦åˆ†åˆ«æ ¼å¼åŒ–å’Œè§£ç URLå­—ç¬¦ä¸²ã€‚</li>
</ul>
</li>
</ul>
<h4 id="3-QueryStringæ¨¡å—å’ŒUrlæ¨¡å—ä¹‹é—´çš„å…³ç³»"><a href="#3-QueryStringæ¨¡å—å’ŒUrlæ¨¡å—ä¹‹é—´çš„å…³ç³»" class="headerlink" title="3. QueryStringæ¨¡å—å’ŒUrlæ¨¡å—ä¹‹é—´çš„å…³ç³»"></a>3. QueryStringæ¨¡å—å’ŒUrlæ¨¡å—ä¹‹é—´çš„å…³ç³»</h4><pre><code>url.parse(string).query
                                       |
       url.parse(string).pathname      |
                   |                   |
                   |                   |
                 ------ -------------------
http://localhost:8888/start?foo=bar&amp;hello=world
                                ---       -----
                                 |          |
                                 |          |
              querystring(string)[&quot;foo&quot;]    |
                                            |
                         querystring(string)[&quot;hello&quot;]
</code></pre><h4 id="4-è·å–é™æ€èµ„æº"><a href="#4-è·å–é™æ€èµ„æº" class="headerlink" title="4. è·å–é™æ€èµ„æº"></a>4. è·å–é™æ€èµ„æº</h4><p>å®Œæ•´å®ä¾‹ï¼ˆæ ¹æ®ä¸åŒçš„urlåœ°å€è¯·æ±‚ä¸åŒçš„æ–‡ä»¶ï¼‰<br></p>
<pre><code>const ip = &apos;192.168.1.223&apos;;//ä¸»æœºIP
const port = 3000;//ç«¯å£å·
//å¼•å…¥çš„ç»„å»ºæ¨¡å—  httpã€urlã€fs
const http = require(&apos;http&apos;);
const urls = require(&apos;url&apos;);
const fs = require(&apos;fs&apos;);
//å®ä¾‹åŒ–ä¸€ä¸ªæœåŠ¡å®¹å™¨
var server = new http.Server();
//ç›‘å¬ä¸€ä¸ªç«¯å£
server.listen(port , ip);
//æ³¨å†Œä¸€ä¸ªäº‹ä»¶å¤„ç†çš„onæ–¹æ³•
server.on(&apos;request&apos; , function(req , res){
    //è·å–è¯·æ±‚çš„urlåœ°å€
    var url = urls.parse(req.url);
    //console.log(url.pathname);
    //æ ¹æ®pathè·¯å¾„æ¥è¯»å–ä¸åŒçš„æ¨¡æ¿æ–‡ä»¶
    switch( url.pathname ){
        //æ˜¾ç¤ºé¦–é¡µ
        case &apos;&apos; || &apos;/&apos;:
            //è¯»å–æ–‡ä»¶å†…å®¹
            fs.readFile(&apos;./index.html&apos;,function( error, content){
                if(error){
                    //å¦‚æœæœ‰é”™è¯¯æ—¶ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                    funError();
                }else{
                    //æ­£ç¡®æ—¶æµè§ˆå™¨è¾“å‡ºæ¨¡æ¿æ–‡ä»¶çš„å†…å®¹
                    funAuccess(res,content);
                }
            });
            break;
        //æ˜¾ç¤ºåˆ—è¡¨é¡µé¢
        case &apos;/list&apos;:
            fs.readFile(&apos;./list.html&apos;,function( error, content){
                if(error){
                        funError(res , error);
                }else{
                    funAuccess(res,content);
                }
                });
            break;
        //æ˜¾ç¤ºè¯¦æƒ…é¡µ
        case &apos;/show&apos;:
            fs.readFile(&apos;./show.html&apos;,function( error, content){
                if(error){
                    funError(res , error);
                }else{
                    funAuccess(res,content);
                }
            });
            break;
        //è·å–é™æ€èµ„æºçš„é¡µé¢ å¦‚ï¼šcss\js
        default:
            //è·å–æ–‡ä»¶å
            var filename = url.pathname.substring(1);
            //è·å–æ–‡ä»¶åå¯¹åº”çš„ç±»å‹å€¼
            var type = getAllType( filename.substring(filename.lastIndexOf(&apos;.&apos;)+1));
            //æµ‹è¯•æ‰€ç”¨
            //console.log(type);
            //è¯»å–é™æ€èµ„æºçš„é¡µé¢
            fs.readFile(filename , function( error, content){
                if(error){
                    funError(res , error);
                }else{
                    res.writeHead(200,{&apos;Content-Type&apos; : type});
                    res.write(content);
                    res.end();
                }
            });
            break;
    }

});
//é”™è¯¯æç¤ºçš„å‡½æ•°
function funError(response , error){
    response.writeHead(400,{&apos;Content-Type&apos;:&apos;text/plain;charset=&quot;utf-8&quot;&apos;});
    response.write(error.message);
    response.end();
}

//æ­£ç¡®æ—¶è¾“å‡ºæ–‡ä»¶å†…å®¹çš„å‡½æ•°
function funAuccess(response,cont){
    response.writeHead(200,{&apos;Content-Type&apos;:&apos;text/html;charset=&quot;utf-8&quot;&apos;});//å¤´ä¿¡æ¯
    response.write(cont);//æ¨¡æ¿æ–‡ä»¶å†…å®¹
    response.end();
}


//å®šä¹‰æ–‡ä»¶ç±»å‹çš„å‡½æ•°
function getAllType(code){
    var type = &apos;&apos;;
    switch(code){
          case &apos;html&apos;:
            type = &apos;text/html;charset=utf-8&apos;;
            break;
        case &apos;js&apos;:
            type = &apos;application/javascript/html;charset=utf-8&apos;;
            break;
        case &apos;css&apos;:
            type = &apos;text/css;charset=utf-8&apos;;
            break;
            case &apos;text&apos;:
            type = &apos;text/plain;charset=utf-8&apos;;
            break;
        case &apos;manifest&apos;:
            type = &apos;text/cache-manifest;charset=utf-8&apos;;
            break;
        default:
            type = &apos;application/octet-stream&apos;;
            break;
    }
    return type;
}
</code></pre><p>è½¬è‡ªï¼š<a href="http://www.jianshu.com/p/21c7db836836" target="_blank" rel="external">http://www.jianshu.com/p/21c7db836836</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Node/" rel="tag"># Node</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/23/31/" rel="next" title="è°ˆå“åº”å¼webè®¾è®¡ä»£ç å®ç°ğŸ¨">
                <i class="fa fa-chevron-left"></i> è°ˆå“åº”å¼webè®¾è®¡ä»£ç å®ç°ğŸ¨
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/25/33/" rel="prev" title="express æ¡†æ¶ä¹‹sessionğŸ¾">
                express æ¡†æ¶ä¹‹sessionğŸ¾ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
    <!-- å¤šè¯´è¯„è®ºæ¡† start -->  
        <div class="ds-thread" data-thread-key="<%- page.path %>" data-title="<%- page.title %>" data-url="<%- page.permalink %>"></div>  
<!-- å¤šè¯´è¯„è®ºæ¡† end -->    
<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->  
<script type="text/javascript">  
var duoshuoQuery = {short_name:"yuzhiyun"};  
    (function() {  
        var ds = document.createElement('script');  
        ds.type = 'text/javascript';ds.async = true;  
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';  
        ds.charset = 'UTF-8';  
        (document.getElementsByTagName('head')[0]   
         || document.getElementsByTagName('body')[0]).appendChild(ds);  
    })();  
    </script>  
<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="menggeNIU" />
          <p class="site-author-name" itemprop="name">menggeNIU</p>
          <p class="site-description motion-element" itemprop="description">ä¸ªäººæ”¶è—</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">50</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/menggeNiu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/1967072037" target="_blank" title="å¾®åš">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  å¾®åš
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://zjflove.github.io" title="zjf" target="_blank">zjf</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.901web.com" title="pybyongbo" target="_blank">pybyongbo</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç›®å½•"><span class="nav-number">1.</span> <span class="nav-text">ç›®å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨"><span class="nav-number">2.</span> <span class="nav-text">ä¸€ã€æ¨¡å—åˆ›å»ºä»¥åŠä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯æ¨¡å—"><span class="nav-number">2.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯æ¨¡å—</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¨¡å—çš„åˆ†ç±»"><span class="nav-number">2.2.</span> <span class="nav-text">æ¨¡å—çš„åˆ†ç±»</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#æ ¸å¿ƒæ¨¡å—"><span class="nav-number">2.2.1.</span> <span class="nav-text">æ ¸å¿ƒæ¨¡å—</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ç¬¬ä¸‰æ–¹æ¨¡å—"><span class="nav-number">2.2.2.</span> <span class="nav-text">ç¬¬ä¸‰æ–¹æ¨¡å—</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åˆ›å»ºæ¨¡å—"><span class="nav-number">2.3.</span> <span class="nav-text">åˆ›å»ºæ¨¡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ç¬¬ä¸€ç§æ–¹å¼"><span class="nav-number">2.3.1.</span> <span class="nav-text">ç¬¬ä¸€ç§æ–¹å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ä½¿ç”¨ï¼š"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">ä½¿ç”¨ï¼š</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ç¬¬äºŒç§æ–¹å¼"><span class="nav-number">2.3.2.</span> <span class="nav-text">ç¬¬äºŒç§æ–¹å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ä½¿ç”¨ï¼š-1"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">ä½¿ç”¨ï¼š</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å•æ¬¡åŠ è½½"><span class="nav-number">2.4.</span> <span class="nav-text">å•æ¬¡åŠ è½½</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è¦†ç›–exports"><span class="nav-number">2.5.</span> <span class="nav-text">è¦†ç›–exports</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#å®šä¹‰æ¨¡å—ï¼šsingleobejct-js"><span class="nav-number">2.5.1.</span> <span class="nav-text">å®šä¹‰æ¨¡å—ï¼šsingleobejct.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject-js"><span class="nav-number">2.5.2.</span> <span class="nav-text">å¼•å…¥æ¨¡å—ä½¿ç”¨ï¼šgetSingleObject.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ç»“æœè¾“å‡ºï¼š"><span class="nav-number">2.5.3.</span> <span class="nav-text">ç»“æœè¾“å‡ºï¼š</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#äºŒã€æ–‡ä»¶æ“ä½œ"><span class="nav-number">3.</span> <span class="nav-text">äºŒã€æ–‡ä»¶æ“ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸‰ã€-IOäº¤äº’"><span class="nav-number">4.</span> <span class="nav-text">ä¸‰ã€ IOäº¤äº’</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯IOäº¤äº’"><span class="nav-number">4.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯IOäº¤äº’</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯Readline"><span class="nav-number">4.2.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯Readline</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¦‚ä½•ä½¿ç”¨Readline"><span class="nav-number">4.3.</span> <span class="nav-text">å¦‚ä½•ä½¿ç”¨Readline</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è¾“å…¥ä¸è¾“å‡ºå®ä¾‹"><span class="nav-number">4.4.</span> <span class="nav-text">è¾“å…¥ä¸è¾“å‡ºå®ä¾‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‘½ä»¤è¡Œè¾“å…¥ä¸è¾“å‡º"><span class="nav-number">4.5.</span> <span class="nav-text">å‘½ä»¤è¡Œè¾“å…¥ä¸è¾“å‡º</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å››ã€URLè§£æ"><span class="nav-number">5.</span> <span class="nav-text">å››ã€URLè§£æ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-URLæ¨¡å—ä¸ºURLçš„è§£æå·¥å…·"><span class="nav-number">5.1.</span> <span class="nav-text">1.URLæ¨¡å—ä¸ºURLçš„è§£æå·¥å…·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-queryString-æ¨¡å—"><span class="nav-number">5.2.</span> <span class="nav-text">2.queryString æ¨¡å—</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-QueryStringæ¨¡å—å’ŒUrlæ¨¡å—ä¹‹é—´çš„å…³ç³»"><span class="nav-number">5.3.</span> <span class="nav-text">3. QueryStringæ¨¡å—å’ŒUrlæ¨¡å—ä¹‹é—´çš„å…³ç³»</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-è·å–é™æ€èµ„æº"><span class="nav-number">5.4.</span> <span class="nav-text">4. è·å–é™æ€èµ„æº</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">menggeNIU</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"nnnmg"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js?v=5.1.0"></script>
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("elhh73EjPvJjogo27rOTNyxB-gzGzoHsz", "ICYhjaCGuWcsPbm8nPit7Gkh");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
